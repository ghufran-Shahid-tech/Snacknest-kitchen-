<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SnackNest Kitchen POS</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Poppins,sans-serif;background:#f2f2f2}
.container{max-width:420px;margin:auto;padding:10px}
.card{background:#fff;border-radius:10px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
h3{text-align:center;margin:6px 0}

/* MENU */
.menu-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px dashed #ccc;font-size:13px}
.menu-item button{background:#000;color:#fff;border:none;padding:4px 8px;border-radius:4px}

/* BILL */
.bill-header{text-align:center}
.bill-header img{width:160px;margin:0 auto 6px;display:block}
.bill-header h2{margin:0;font-size:26px;font-weight:900}
.bill-header p{margin:2px 0;font-size:12px}

table{width:100%;border-collapse:collapse;font-size:12px}
th,td{padding:4px;text-align:center}
hr{border:none;border-top:2px dashed #000;margin:8px 0}

/* TOTAL */
.total{display:flex;justify-content:space-between;font-size:13px}
.total.grand{font-size:15px;font-weight:900}

/* BUTTONS */
button.action{width:100%;padding:8px;margin-top:6px;border:none;border-radius:5px;font-size:13px}
.print{background:#000;color:#fff}
.whatsapp{background:#25D366;color:#fff}
.clear{background:#ccc}

/* ADMIN */
.admin input{width:100%;padding:6px;margin:4px 0}
.admin button{width:100%;padding:7px;background:#0b8457;color:#fff;border:none;border-radius:5px}

/* REPORT */
.report table{font-size:12px}
.report th{border-bottom:1px solid #000}

/* MODAL */
#adminModal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.7);
  display:flex;align-items:center;justify-content:center;
}
.modal{
  background:#fff;padding:20px;border-radius:10px;
  width:90%;max-width:300px;text-align:center;
}

/* PRINT */
@media print{
  body{background:#fff}
  .menu,.admin,.report,.actions{display:none}
  .container{width:80mm;padding:0}
  .card{box-shadow:none}
}
</style>
</head>

<body>

<!-- ADMIN LOGIN -->
<div id="adminModal">
  <div class="modal">
    <h3>Admin Login</h3>
    <input type="password" id="adminPass" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>
</div>

<div class="container">

<!-- MENU -->
<div class="card menu">
<h3>üçΩÔ∏è Menu</h3>
<div id="menu"></div>
</div>

<!-- BILL -->
<div class="card">
<div class="bill-header">
  <img src="logo.png">
  <h2>SNACKNEST</h2>
  <p>Kitchen & Fast Food</p>
  <p id="billDate"></p>
  <p><b>Token:</b> <span id="tokenNo"></span></p>
</div>

<hr>

<table>
<thead>
<tr><th>Item</th><th>Qty</th><th>Amt</th></tr>
</thead>
<tbody id="billItems"></tbody>
</table>

<hr>

<div class="total"><span>Subtotal</span><span id="sub">0</span></div>
<div class="total"><span>Delivery</span><span id="delivery">50</span></div>
<div class="total grand"><span>Total</span><span id="total">0</span></div>

<hr>

<div style="text-align:center;font-size:12px">
üìû 0316 2341381<br>
üìç Musharaf Colony, Karachi
</div>

<div class="actions">
<button class="action print" onclick="printBill()">üñ®Ô∏è Print</button>
<button class="action whatsapp" onclick="sendWhatsApp()">üì≤ WhatsApp</button>
<button class="action clear" onclick="clearBill()">üóëÔ∏è Clear</button>
</div>
</div>

<!-- ADMIN PANEL -->
<div class="card admin">
<h3>üîê Admin Panel</h3>
<input id="newName" placeholder="Item Name">
<input id="newPrice" type="number" placeholder="Price">
<button onclick="addItemAdmin()">‚ûï Add Item</button>
</div>

<!-- REPORT -->
<div class="card report">
<h3>üìä Daily Sales Report</h3>
<table width="100%">
<thead>
<tr><th>Time</th><th>Token</th><th>Total</th></tr>
</thead>
<tbody id="reportBody"></tbody>
</table>
<button class="action clear" onclick="clearReport()">Clear Report</button>
</div>

</div>

<script>
const ADMIN_PASSWORD="1234";

/* MENU */
let menuData = JSON.parse(localStorage.getItem("menu")) || [
{name:"Fried Rice Veg",price:200},
{name:"Fried Rice Chicken",price:250},
{name:"Chilli Chicken",price:250},
{name:"Chow Mein",price:250},
{name:"Bun Kabab",price:100},
{name:"Anday Wala Burger",price:150},
{name:"Zinger Breast",price:300},
{name:"Zinger Breast Cheese",price:350},
{name:"Zinger Thigh",price:350},
{name:"Zinger Thigh Cheese",price:400},
{name:"Alfredo Pasta",price:350},
{name:"Lasagne",price:500},
{name:"Masala Fries",price:150},
{name:"Mayo Fries",price:150},
{name:"Cheese Fries",price:250},
{name:"Pakistani Soft Drink 500ml",price:100},
{name:"Shawarma",price:170},
{name:"Momos",price:200},
{name:"Chicken Wings",price:350}
];

let cart={};
let deliveryCharge=50;
let token=Number(localStorage.getItem("token"))||1;
let sales=JSON.parse(localStorage.getItem("sales"))||[];

/* LOGIN */
function login(){
  if(adminPass.value===ADMIN_PASSWORD){
    adminModal.style.display="none";
    loadMenu();
    loadReport();
  }else alert("Wrong Password");
}

/* MENU */
function loadMenu(){
  menu.innerHTML="";
  menuData.forEach(i=>{
    menu.innerHTML+=`
    <div class="menu-item">
      <span>${i.name} ‚Äì PKR ${i.price}</span>
      <button onclick="addItem('${i.name}',${i.price})">Add</button>
    </div>`;
  });
}

/* CART */
function addItem(n,p){
  if(!cart[n]) cart[n]={qty:0,price:p};
  cart[n].qty++;
  renderBill();
}

function renderBill(){
  billItems.innerHTML="";
  let s=0;
  for(let n in cart){
    let i=cart[n];
    let t=i.qty*i.price;
    s+=t;
    billItems.innerHTML+=`<tr><td>${n}</td><td>${i.qty}</td><td>${t}</td></tr>`;
  }
  sub.innerText=s;
  delivery.innerText=deliveryCharge;
  total.innerText=s+deliveryCharge;
}

/* SAVE SALE */
function saveSale(){
  sales.push({
    time:new Date().toLocaleTimeString(),
    token:token,
    total:total.innerText
  });
  localStorage.setItem("sales",JSON.stringify(sales));
}

/* REPORT */
function loadReport(){
  reportBody.innerHTML="";
  sales.forEach(s=>{
    reportBody.innerHTML+=`
    <tr><td>${s.time}</td><td>${s.token}</td><td>${s.total}</td></tr>`;
  });
}

function clearReport(){
  if(confirm("Clear all sales?")){
    sales=[];
    localStorage.removeItem("sales");
    loadReport();
  }
}

/* ADMIN ADD ITEM */
function addItemAdmin(){
  if(newName.value && newPrice.value){
    menuData.push({name:newName.value,price:+newPrice.value});
    localStorage.setItem("menu",JSON.stringify(menuData));
    newName.value=newPrice.value="";
    loadMenu();
  }
}

/* ACTIONS */
function printBill(){
  saveSale();
  window.print();
  token++;
  localStorage.setItem("token",token);
  tokenNo.innerText=token;
  clearBill();
  loadReport();
}

function sendWhatsApp(){
  let msg="üßæ SnackNest Order%0A";
  for(let n in cart){
    let i=cart[n];
    msg+=`${n} x${i.qty} = ${i.qty*i.price}%0A`;
  }
  msg+=`Total: ${total.innerText}`;
  window.open("https://wa.me/923162341381?text="+msg,"_blank");
}

function clearBill(){
  cart={};
  renderBill();
}

/* INIT */
billDate.innerText=new Date().toLocaleString();
tokenNo.innerText=token;
loadMenu();
loadReport();
</script>

</body>
</html>
